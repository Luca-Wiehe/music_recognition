# Configuration for Monophonic CRNN model training  
# Usage: python train.py --config configs/monophonic_model.yaml

# Model configuration
model:
  type: "MonophonicModel"
  params: {}  # MonophonicModel uses hparams from config root

# Data configuration
data:
  # List of datasets with their formats
  datasets:
    - path: "data/primus/package_aa"
      format: "primus"  # primus or bekern
    - path: "data/primus/package_ab"
      format: "primus"  # primus or bekern
    # Example of bekern format data:
    # - path: "data/bekern/dataset_1"
    #   format: "bekern"
  
  # Vocabulary configuration
  primus_vocabulary_path: "data/semantic_labels.txt"  # For primus format datasets
  bekern_vocabulary_path: "third_party/SMT/vocab/FP_GrandStaff_BeKernw2i.npy"  # For bekern format datasets
  mapping_file_path: "data/primus_to_bekern_mapping.json"  # Conversion mapping file
  
  # Data processing
  split_ratio: [0.6, 0.2, 0.2]  # train, val, test
  num_workers: 2
  pin_memory: true

# Training configuration
training:
  batch_size: 32
  epochs: 200
  
  # Optimizer settings
  optimizer:
    type: "Adam"
    learning_rate: 1e-3
    weight_decay: 1e-4
  
  # Learning rate scheduler
  scheduler:
    type: "ReduceLROnPlateau"
    mode: "min"
    factor: 0.5
    patience: 5
    threshold: 1e-4
    threshold_mode: "rel"
    cooldown: 2
    eps: 1e-8
  
  # Early stopping
  early_stop_patience: 10
  
  # Gradient clipping
  grad_clip_norm: 1.0
  
  # Checkpointing
  checkpoint_dir: "checkpoints/monophonic_model"

# Legacy MonophonicModel hyperparameters (for backward compatibility)
batch_size: 32
optimizer:
  learning_rate: 1e-3
  weight_decay: 1e-4

scheduler:
  mode: "min"
  plateau_patience: 5
  plateau_decay: 0.5
  threshold: 1e-4
  threshold_mode: "rel"
  cooldown: 2
  eps: 1e-8

early_stop:
  patience: 10

# Logging configuration
logging:
  use_wandb: true
  wandb:
    project: "music-recognition"
    run_name: "monophonic-crnn-baseline"
    tags: ["monophonic", "crnn", "baseline", "omr"]
    notes: "Baseline CRNN model with CTC loss for comparison"

# Hardware configuration
hardware:
  device: "auto"  # auto, cpu, cuda
  mixed_precision: false